# Imagen base de Python
FROM python:3.10-slim-bullseye

# Variables de entorno
ENV FLASK_ENV=production
ENV PYTHONUNBUFFERED=1
ENV PATH=$PATH:/home/flaskapp/.local/bin

# Crear usuario y establecer directorio de trabajo
RUN useradd --create-home --home-dir /home/flaskapp flaskapp
WORKDIR /home/flaskapp

# Cambiar a usuario flaskapp y crear directorio app
USER flaskapp
RUN mkdir app

# Copiar el contenido del c贸digo de la aplicaci贸n y el archivo principal
COPY . .

# # Agregar y instalar las dependencias
# ADD requirements.txt ./requirements.txt
# RUN pip install --no-cache-dir -r requirements.txt

# Exponer el puerto de Flask
EXPOSE 5000

# Comando de ejecuci贸n de la aplicaci贸n Flask
CMD [ "python", "./stock.py" ]
